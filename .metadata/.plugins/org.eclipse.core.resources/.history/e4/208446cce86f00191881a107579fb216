package com.carAgency;

public class Executor {
	public static void main(String[] args) {
		int option = 1;
		
		CarAgency carAgency = CarAgency.registerCarAgency();
		
		do {
			option = View.solicitarDadosInt("Selecione uma opcao: ",
					"1 - Cadastrar filial\n"
					+"2 - Listar filiais\n"
					+"3 - Selecionar uma filial\n"
					+"4 - Relatorio GERAL\n"
					+"0 - Sair.."
			);
			switch (option) {
			case 0:
				option = 0;
				break;
			case 1:
				try {
					Branch brnch = Branch.registerBranch();
					carAgency.addBranch(brnch);
				} catch (Exception e) {
					View.exibirMsgErro(e.getMessage());
				}
				break;
			case 2:
				if(Branch.getNumBranchs() == 0)
					View.exibirMsgErro("Nao existem filiais cadastradas!");
				else {
					String msg = Branch.listBranchs(carAgency.getBrnchs());
					View.exibirMsg(msg);
				}
				break;
			case 3:
				if(Branch.getNumBranchs() == 0)
					View.exibirMsgErro("Nao existem filiais cadastradas!");
				else {
					subMenuBranch(Branch.selectBranch(carAgency.getBrnchs()));
				}
				break;
			case 4:
				if(Branch.getNumBranchs() == 0 && Sale.getNumSales() == 0)
					View.exibirMsgErro("Nao existem registros de venda!");
				else {
					Report.buildReportAll(carAgency.getBrnchs());
				}
				break;
			default:
				View.exibirMsgErro("Opcao invalida!");
				break;
			}
		} while (option != 0);	
	}
	
	public static void subMenuBranch(Branch brnch) {
		int option = 1;
		
		do {
			option = View.solicitarDadosInt(brnch.getStoreName(), 
					"1 - Cadastrar um carro\n"
					+"2 - Cadastrar um cliente\n"
					+"3 - Realizar uma venda\n"
					+"4 - Gerar relatório de vendas\n"
					+"0 - Voltar.."
			);
			switch (option) {
			case 0:
				option = 0;
				break;
			case 1:
				try {
					Client clnt = Client.registerClient();
					brnch.addClient(clnt);
				} catch (Exception e) {
					// TODO: handle exception
				}

				break;
			case 2:
				break;
			case 3:
				break;
			case 4:
				break;
			default:
				View.exibirMsgErro("Opcao invalida!");
				break;
			}
		} while (option != 0);
	}
}
